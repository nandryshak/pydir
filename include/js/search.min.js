var _Tree=JSON.parse(jsonText),searchTerm=getQueryVariable("query");if(document.getElementById("file-list").innerHTML='<tr class="listing-item"><td class=""></td><td>Searching...</td><td><small class="text-muted"></small></td><td><small class="file-size text-muted"></small></td></tr>',searchTerm){document.getElementById("search-box").setAttribute("value",searchTerm);var idx=lunr(function(){this.ref("index"),this.field("name",{boost:10});for(var t=0;t<_Tree.length;t++)this.add({index:t,name:_Tree[t].name})});displaySearchResults(idx.search(searchTerm+"~1"),_Tree)}function getQueryVariable(t){for(var e=window.location.search.substring(1).split("&"),s=0;s<e.length;s++){var l=e[s].split("=");if(l[0]===t)return decodeURIComponent(l[1].replace(/\+/g,"%20"))}}function displaySearchResults(t,e){var s=document.getElementById("file-list");if(t.length){for(var l="",r=0;r<t.length;r++){var a=e[t[r].ref];a&&(l+='<tr class="listing-item" onclick="window.location.href=\''+a.path+"'\">",l+='<td class=""></td>',l+='<td><a class="file-name" draggable="true" href="'+a.path+'">'+a.name+'<br> <small class="text-muted">'+a.path.trim(".")+"</small></a></td>",l+='<td><small class="text-muted">'+a.lastmodified+"</small></td>",l+='<td><small class="file-size text-muted">'+a.filesize+"</small></td></tr>")}s.innerHTML=l}else s.innerHTML='<tr class="listing-item"><td class=""></td><td>No Matches Found</td><td><small class="text-muted"></small></td><td><small class="file-size text-muted"></small></td></tr>'}String.prototype.trimLeft=function(t){return void 0===t&&(t="s"),this.replace(new RegExp("^["+t+"]+"),"")},String.prototype.trimRight=function(t){return void 0===t&&(t="s"),this.replace(new RegExp("["+t+"]+$"),"")},String.prototype.trim=function(t){return this.trimLeft(t).trimRight(t)};
